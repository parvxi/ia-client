<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Client Portal - Internal Audit</title>
</head>

<body>
  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="loading-overlay">
    <div class="loading-content">
      <div class="spinner-large"></div>
      <p class="loading-text">Loading your observations...</p>
    </div>
  </div>

  <!-- Main Content -->
  <div id="mainContent" class="portal-container">

    <!-- Welcome Banner -->
    <div class="welcome-banner" id="welcomeBanner">
      <div class="welcome-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <path
            d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3" />
        </svg>
      </div>
      <div class="welcome-content">
        <h2 class="welcome-title">Welcome, <span id="greetingName">User</span>!</h2>
        <p class="welcome-text" id="welcomeText">
          You have observations requiring your attention. Use the filters below to navigate through your assignments.
        </p>
      </div>
      <button class="banner-close" id="closeBanner" aria-label="Close banner">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
      </button>
    </div>

    <!-- Active Filter Notice -->
    <div class="filter-notice" id="filterNotice" style="display: none;">
      <div class="notice-icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" />
        </svg>
      </div>
      <div class="notice-content">
        <span id="filterNoticeText">Showing observations filtered by email link</span>
      </div>
      <button class="notice-clear" id="clearFilters">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
        Clear Filters
      </button>
    </div>

    <!-- Statistics Cards -->
    <div class="stats-grid">
      <div class="stat-card stat-total">
        <div class="stat-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
            <polyline points="14 2 14 8 20 8" />
            <line x1="16" y1="13" x2="8" y2="13" />
            <line x1="16" y1="17" x2="8" y2="17" />
            <polyline points="10 9 9 9 8 9" />
          </svg>
        </div>
        <div class="stat-content">
          <span class="stat-number" id="totalCount">0</span>
          <span class="stat-label">Total Observations</span>
        </div>
      </div>
      <div class="stat-card stat-overdue">
        <div class="stat-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="8" x2="12" y2="12" />
            <line x1="12" y1="16" x2="12.01" y2="16" />
          </svg>
        </div>
        <div class="stat-content">
          <span class="stat-number" id="overdueCount">0</span>
          <span class="stat-label">Overdue</span>
        </div>
      </div>
      <div class="stat-card stat-pending">
        <div class="stat-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <polyline points="12 6 12 12 16 14" />
          </svg>
        </div>
        <div class="stat-content">
          <span class="stat-number" id="pendingCount">0</span>
          <span class="stat-label">Pending</span>
        </div>
      </div>
      <div class="stat-card stat-completed">
        <div class="stat-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
            <polyline points="22 4 12 14.01 9 11.01" />
          </svg>
        </div>
        <div class="stat-content">
          <span class="stat-number" id="completedCount">0</span>
          <span class="stat-label">Completed</span>
        </div>
      </div>
    </div>

    <!-- Filters Section -->
    <div class="filters-card">
      <div class="filters-header">
        <div class="filters-title">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" />
          </svg>
          <span>Filter Observations</span>
        </div>
        <button class="filters-reset" id="resetFilters">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="1 4 1 10 7 10" />
            <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10" />
          </svg>
          Reset All
        </button>
      </div>
      <div class="filters-body">
        <div class="filter-group">
          <label class="filter-label" for="filterDueDate">Due Date</label>
          <select id="filterDueDate" class="filter-select">
            <option value="">All Due Dates</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="filter-label" for="filterStatus">Status</label>
          <select id="filterStatus" class="filter-select">
            <option value="">All Statuses</option>
            <option value="overdue">Overdue</option>
            <option value="pending">Pending</option>
            <option value="completed">Completed</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="filter-label" for="filterAudit">Audit</label>
          <select id="filterAudit" class="filter-select">
            <option value="">All Audits</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="filter-label" for="filterSearch">Search</label>
          <div class="search-input-wrapper">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <circle cx="11" cy="11" r="8" />
              <line x1="21" y1="21" x2="16.65" y2="16.65" />
            </svg>
            <input type="text" id="filterSearch" class="filter-input" placeholder="Search observations...">
          </div>
        </div>
      </div>
    </div>

    <!-- Observations List -->
    <div class="observations-section">
      <div class="section-header">
        <h2 class="section-title">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="8" y1="6" x2="21" y2="6" />
            <line x1="8" y1="12" x2="21" y2="12" />
            <line x1="8" y1="18" x2="21" y2="18" />
            <line x1="3" y1="6" x2="3.01" y2="6" />
            <line x1="3" y1="12" x2="3.01" y2="12" />
            <line x1="3" y1="18" x2="3.01" y2="18" />
          </svg>
          Your Observations
        </h2>
        <div class="section-actions">
          <span class="results-count" id="resultsCount">0 observations</span>
          <div class="view-toggle">
            <button class="view-btn active" id="viewCards" title="Card View">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="3" width="7" height="7" />
                <rect x="14" y="3" width="7" height="7" />
                <rect x="14" y="14" width="7" height="7" />
                <rect x="3" y="14" width="7" height="7" />
              </svg>
            </button>
            <button class="view-btn" id="viewTable" title="Table View">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <line x1="3" y1="6" x2="21" y2="6" />
                <line x1="3" y1="12" x2="21" y2="12" />
                <line x1="3" y1="18" x2="21" y2="18" />
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Card View Container -->
      <div id="observationsCards" class="observations-grid">
        <!-- Observation cards will be dynamically inserted here -->
      </div>

      <!-- Table View Container -->
      <div id="observationsTable" class="observations-table-container" style="display: none;">
        <table class="observations-table">
          <thead>
            <tr>
              <th>Reference</th>
              <th>Observation</th>
              <th>Audit</th>
              <th>Due Date</th>
              <th>Risk</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="observationsTableBody">
            <!-- Table rows will be dynamically inserted here -->
          </tbody>
        </table>
      </div>

      <!-- Empty State -->
      <div id="emptyState" class="empty-state" style="display: none;">
        <div class="empty-icon">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
            <polyline points="14 2 14 8 20 8" />
            <line x1="12" y1="18" x2="12" y2="12" />
            <line x1="9" y1="15" x2="15" y2="15" />
          </svg>
        </div>
        <h3 class="empty-title">No Observations Found</h3>
        <p class="empty-text">There are no observations matching your current filters.</p>
        <button class="btn btn-secondary" id="emptyResetFilters">Reset Filters</button>
      </div>

      <!-- Loading State for List -->
      <div id="listLoading" class="list-loading" style="display: none;">
        <div class="spinner-small"></div>
        <span>Loading observations...</span>
      </div>
    </div>

    <!-- Observation Detail Modal -->
    <div id="detailModal" class="modal" style="display: none;">
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h2 class="modal-title">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
              <polyline points="14 2 14 8 20 8" />
              <line x1="16" y1="13" x2="8" y2="13" />
              <line x1="16" y1="17" x2="8" y2="17" />
            </svg>
            Observation Details
          </h2>
          <button class="modal-close" id="closeDetailModal">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18" />
              <line x1="6" y1="6" x2="18" y2="18" />
            </svg>
          </button>
        </div>
        <div class="modal-body" id="detailModalBody">
          <!-- Detail content will be dynamically inserted here -->
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" id="closeDetailBtn">Close</button>
          <a href="#" class="btn btn-primary" id="updateObservationBtn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
            </svg>
            Update Observation
          </a>
        </div>
      </div>
    </div>

    <!-- Error Modal -->
    <div id="errorModal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="error-icon-large">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="8" x2="12" y2="12" />
            <line x1="12" y1="16" x2="12.01" y2="16" />
          </svg>
        </div>
        <h2 class="error-title">Unable to Load Data</h2>
        <p class="error-text" id="errorMessage">An error occurred while loading your observations. Please try again.</p>
        <div class="modal-actions">
          <button class="btn btn-primary" id="retryButton">Try Again</button>
        </div>
      </div>
    </div>
</body>

</html>